trigger:
- main   # branch name

pool:
  name: Default
  demands:
    - Agent.Name -equals chakri   # your agent name

variables:
  HEADLESS: 'false'   # set to true for headless mode

steps:
# Run Maven build and execute App.java, capture logs
- script: |
    mvn clean compile exec:java -Dexec.mainClass=com.example.App -Dheadless=$(HEADLESS) | tee app.log
  displayName: "Run App.java and capture console logs"

# Publish the captured log file as an artifact
- task: PublishPipelineArtifact@1
  inputs:
    targetPath: 'app.log'
    artifact: 'console-logs'
    publishLocation: 'pipeline'
