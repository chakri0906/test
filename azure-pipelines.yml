trigger:
- main

pool:
  name: Default
  demands:
    - Agent.Name -equals chakri

variables:
  HEADLESS: 'false'

steps:
# Run Maven and capture logs into a file
- script: |
    mvn clean compile exec:java -Dexec.mainClass=com.example.App -Dheadless=$(HEADLESS) | tee app.log
  displayName: "Run App.java and capture console logs"

# Publish the captured log file as an artifact
- task: PublishPipelineArtifact@1
  inputs:
    targetPath: 'app.log'
    artifact: 'console-logs'
